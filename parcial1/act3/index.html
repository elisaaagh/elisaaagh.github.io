<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <title>Actividad 3</title>
  <link rel="icon" href="../../images/favicon.ico">
  <link href="https://unpkg.com/aos@2.3.1/dist/aos.css" rel="stylesheet">
  <link rel="stylesheet" href="../../css/styles.css">
</head>

<body>

<!-- hero -->
<canvas id="particles"></canvas>

    <div class="topbar">
        <div class="matrix-bg"></div>
        <img src="../../images/upslp.jpg" alt="Logo universidad" class="logo-uni">
        <a href="../index.html" class="btn-volver-top">← Volver</a>
        <img src="../../images/capi.png" alt="Foto estudiante" class="foto-alumna">
    </div>

  <div class="parcial-hero">
  <h1>Actividad 3</h1>
  <p>Interpretación y traducción de políticas de filtrado en iptables</p>
</div>


<!-- ===== DASHBOARD ===== -->
<div class="lab">

  <!-- INTRO -->
  <div class="lab-card intro">
    <h2>Introducción</h2>
    <p style:text-align="justify";>
      Opera sobre el subsistema de filtrado de paquetes del kernel de Linux , llamado Netfilter , y actúa como un muro de control (firewall de nivel de red y transporte) que decide qué hacer con cada paquete.
    </p>
    <p style:text-align="justify";>
      Cuando un paquete llega o sale del sistema, el kernel lo procesa a través de tablas y cadenas donde se aplican reglas.
    </p>
  </div>

  <!-- DESARROLLO -->
  <div class="lab-card desarrollo">
    <h2>Desarrollo técnico</h2>
    <ol>
      <li>Completa los espacios conforme se explica el flujo del paquete.</li>
      <p style:text-align="justify";>
        Cuando un paquete llega al sistema, primero pasa por una <u> tabla </u>, después por una <u> cadena </u> y finalmente se ejecuta una <u> acción </u>.
      </p>
      <li>Relaciona cada tabla con su propósito principal. </li>
      <table>
      <tr>
        <th>Tabla</th>
          <th>Propósito principal</th>
          <th>Ejemplo de uso</th>
        </tr>
        <tr>
          <td><strong>FILTER</strong></td>
          <td>Firewall que filtra paquetes.</td>
          <td>Bloquear tráfico.</td>
        </tr>
        <tr>
          <td><strong>NAT</strong></td>
          <td>Traducción de direcciones.</td>
          <td>Conexión de diferentes dispositivos.</td>
        </tr>
        <tr>
          <td><strong>MANGLE</strong></td>
          <td>Marcar las cabeceras.</td>
          <td>Cambiar las cabeceras.</td>
        </tr>
        <tr>
          <td><strong>RAW</strong></td>
          <td>Seguimiento a la conexión.</td>
          <td>Realiza monitoreos.</td>
        </tr>
        <tr>
          <td><strong>SECURITY</strong></td>
          <td>Permitir el servicio de seguridad.</td>
          <td>Permite el servicio.</td>
        </tr>
      </table>
      <li>Anatomía de un comando iptables.</li>
      <p style:text-align="justify";>
        iptables -A <u> cadena </u> -p tcp -m <u> multiport </u> --dports 80,443 -j <u> acción </u>
      </p>
      <li>Este comando permite: </li>
      <p style:text-align="justify";>
         Aplicar una acción a tráfico TCP dirigido a los puertos 80 y 443 en la cadena que se especifique.
        </p>
      <li>Variables y opciones comunes</li>
      <ol type="a">
        <li><strong>Limitar intentos por minuto </strong></li>
          <p style:text-align="justify";>
            --limit 5/minute
          </p>
        <li><strong>Filtrar por IP de origen </strong></li>
          <p style:text-align="justify";>
            -s 192.168.1.1/24
          </p>
        <li><strong>Ver solo números, sin DNS (ni resolución de puertos)</strong></li>
        <p style:text-align="justify";>
          -L -n
        </p>
        <li><strong>Ver reglas con contadores (paquetes y bytes</strong></li>
        <p style:text-align="justify";>
          -L -v
        </p>
      </ol>
      <li>¿Qué hace esta regla?</li>
      <p style:text-align="justify";>
      <strong>iptables -A INPUT -i eth0 -p tcp -m multiport --dports 22,80,443 \ -m state --state NEW,ESTABLISHED -j ACCEPT </strong>
    </p>
    <p style:text-align="justify";>
      Permite tráfico TCP entrante por la interfaz eth0 a los puertos 22, 80 y 443, siempre que sea parte de una conexión nueva o establecida.
    </p>
      <li>Permite tráfico HTTP entrante</li>
      <p style:text-align="justify";>
         iptables -A INPUT -p tcp –dport 80 -j ACCEPT
      </p>
      <li>Permitir todo el tráfico saliente </li>
      <p style:text-align="justify";>
        iptables -A OUTPUT -j ACCEPT
      </p>
      <p style:text-align="justify";>
        iptables -A OUTPUT -j ACCEPT
      </p>
      <li>Permitir SSH solo desde la IP 192.168.1.5,0 </li>
      <p style:text-align="justify";>
        iptables -A INPUT -p tcp -s 192.168.1.50 –dport 22 -m conntrack –ctstate NEW,ESTABLISHED -j ACCEPT
      </p>
      <li>Permitir tráfico TCP entrante a puertos 80 y 443 solo si es conexión establecida o relacionada </li>
      <p style:text-align="justify";>
        iptables -A INPUT -p tcp -m multiport –dports 80,443 -m conntrack –ctstate ESTABLISHED,RELATED -j ACCEPT
      </p>
      <li>Permitir tráfico TCP entrante por eth0 a 22, 80 y 443, registrar intentos y permitir solo NEW y ESTABLISHED </li>
      <p style:text-align="justify";>
         iptables -A INPUT -i eth0 -p tcp -m multiport –dports 22,80,443 -m conntrack –ctstate NEW -j LOG –log-prefix “INTENTO ENTRANTE TCP: ”
    </p>
    </ol>
    
  </div>


  <!-- MULTIMEDIA -->
  <div class="lab-card multimedia">
    <h2>Material multimedia</h2>
    <img src="images/c2.png" alt="Evidencia">
  </div>


  <!-- REFLEXIÓN -->
  <div class="lab-card reflexion">
    <h2>Opinión / reflexión técnica</h2>
    <p>
      Relación del ejercicio con escenarios reales, riesgos y aplicaciones
      prácticas en la ciberseguridad.
    </p>
  </div>


  <!-- REFERENCIAS -->
  <div class="lab-card referencias">
    <h2>Referencias</h2>
    <ul>
      <li>Material de clase CNO V - Seguridad informática.</li>
      <li>IBM Doc <a href="https://www.ibm.com/docs/es/dsm?topic=iptables-configuring" target="_blank">https://www.ibm.com/docs/es/dsm?topic=iptables-configuring</a></li>
    </ul>
  </div>


  <!-- PDF -->
 <div style="text-align:center; margin-top:40px;">
    <a href="177339-act03.pdf" class="btn-ver" download>
      Exportar a PDF
    </a>
  </div>

</div>
<div class="section-divider"></div>
<footer>
  <p>Elisa Alejandra Arellano Wratny                    © Portafolio Seguridad Informática                    UPSLP</p>
</footer>

  <script src="https://unpkg.com/aos@2.3.1/dist/aos.js"></script>

  <script>
    AOS.init({
      duration: 450,
      delay: 0,
      offset: 10,      
      once: true,
      easing: 'ease-out-cubic',
      anchorPlacement: 'top-bottom'
    });
  </script>
    <script src="../../js/particles.js"></script>

</body>
</html>
