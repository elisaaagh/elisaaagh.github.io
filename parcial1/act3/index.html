<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <title>Actividad 3</title>
  <link rel="icon" href="../../images/favicon.ico">
  <link href="https://unpkg.com/aos@2.3.1/dist/aos.css" rel="stylesheet">
  <link rel="stylesheet" href="../../css/styles.css">
</head>

<body>

<!-- hero -->
<canvas id="particles"></canvas>

    <div class="topbar">
        <div class="matrix-bg"></div>
        <img src="../../images/upslp.jpg" alt="Logo universidad" class="logo-uni">
        <a href="../index.html" class="btn-volver-top">← Volver</a>
        <img src="../../images/capi.png" alt="Foto estudiante" class="foto-alumna">
    </div>

  <div class="parcial-hero">
  <h1>Actividad 3</h1>
  <p>Interpretación y traducción de políticas de filtrado en iptables</p>
</div>


<!-- ===== DASHBOARD ===== -->
<div class="lab">

  <!-- INTRO -->
  <div class="lab-card intro">
    <h2>Introducción</h2>
    <p style:text-align="justify";>
      Opera sobre el subsistema de filtrado de paquetes del kernel de Linux , llamado Netfilter , y actúa como un muro de control (firewall de nivel de red y transporte) que decide qué hacer con cada paquete.
    </p>
    <p style:text-align="justify";>
      Cuando un paquete llega o sale del sistema, el kernel lo procesa a través de tablas y cadenas donde se aplican reglas.
    </p>
  </div>

  <!-- DESARROLLO -->
  <div class="lab-card desarrollo">
    <h2>Desarrollo técnico</h2>
    <ul>
      <li>1. Completa los espacios conforme se explica el flujo del paquete.</li>
    </ul>
    <p style:text-align="justify";>
      Cuando un paquete llega al sistema, primero para por una <u> tabla </u>, después por una <u> cadena </u> y finalmente se ejecuta una <u> acción </u>.
    </p>
    <ul>
      <li>2. Relaciona cada tabla con su propósito principal. </li>
    </ul>
    <table>
      <tr>
        <th>Tabla</th>
        <th>Propósito principal</th>
        <th>Ejemplo de uso</th>
      </tr>
      <tr>
        <td><strong>FILTER</strong></td>
        <td>Firewall que filtra paquetes.</td>
        <td>Bloquear tráfico.</td>
      </tr>
      <tr>
        <td><strong>NAT</strong></td>
        <td>Traducción de direcciones.</td>
        <td>Conexión de diferentes dispositivos.</td>
      </tr>
      <tr>
        <td><strong>MANGLE</strong></td>
        <td>Marcar las cabeceras.</td>
        <td>Cambiar las cabeceras.</td>
      </tr>
      <tr>
        <td><strong>RAW</strong></td>
        <td>Seguimiento a la conexión.</td>
        <td>Realiza monitoreos.</td>
      </tr>
      <tr>
        <td><strong>SECURITY</strong></td>
        <td>Permitir el servicio de seguridad.</td>
        <td>Permite el servicio.</td>
      </tr>
    </table>
    <ul>
      <li>3. Anatomía de un comando iptables.</li>
    </ul>
    <p style:text-align="justify";>
      iptables -A <u> cadena </u> -p tcp -m <u> multiport </u> --dports 80,443 -j <u> acción </u>
    </p>
    <ul>
      <li>4.	Este comando permite: </li>
    </ul>
    <p style:text-align="justify";>
     Aplicar una acción a tráfico TCP dirigido a los puertos 80 y 443 en la cadena que se especifique.
    </p>
    <ul>
      <li>5. Variables y opciones comunes</li>
      <ul>
        <li><strong>Limitar intentos por minuto </strong></li>
      </ul>
      <p style:text-align="justify";>
        --limit 5/minute
      </p>
      <ul>
        <li><strong>b) Filtrar por IP de origen </strong></li>
      </ul>
      <p style:text-align="justify";>
        -s 192.168.1.1/24
      </p>
      <ul>
        <li><strong>c) Ver solo números, sin DNS (ni resolución de puertos)</strong></li>
      </ul>
      <p style:text-align="justify";>
        -L -n
      </p>
      <ul>
        <li><strong>d)	Ver reglas con contadores (paquetes y bytes</strong></li>
      </ul>
      <p style:text-align="justify";>
        -L -v
      </p>
    </ul>
    <ul>
      <li>6. ¿Qué hace esta regla?</li>
    </ul>
    <p style:text-align="justify";>
      <strong>iptables -A INPUT -i eth0 -p tcp -m multiport --dports 22,80,443 \ -m state --state NEW,ESTABLISHED -j ACCEPT </strong>
    </p>
    <p style:text-align="justify";>
      Permite tráfico TCP entrante por la interfaz eth0 a los puertos 22, 80 y 443, siempre que sea parte de una conexión nueva o establecida.
    </p>
    <ul>
      <li>7. Permite tráfico HTTP entrante</li>
    </ul>
    <p style:text-align="justify";>
       iptables -A INPUT -p tcp –dport 80 -j ACCEPT
    </p>
    <ul>
      <li>8.	Permitir todo el tráfico saliente </li>
    </ul>
    <p style:text-align="justify";>
        iptables -A OUTPUT -j ACCEPT
    </p>
    <ul>
      <li>9.	Permitir SSH solo desde la IP 192.168.1.5,0 </li>
    </ul>
    <p style:text-align="justify";>
        iptables -A INPUT -p tcp -s 192.168.1.50 –dport 22 -m conntrack –ctstate NEW,ESTABLISHED -j ACCEPT
    </p>
    <ul>
      <li>10.	Permitir tráfico TCP entrante a puertos 80 y 443 solo si es conexión establecida o relacionada </li>
    </ul>
    <p style:text-align="justify";>
        iptables -A INPUT -p tcp -m multiport –dports 80,443 -m conntrack –ctstate ESTABLISHED,RELATED -j ACCEPT
    </p>
    <ul>
      <li>11.	Permitir tráfico TCP entrante por eth0 a 22, 80 y 443, registrar intentos y permitir solo NEW y ESTABLISHED </li>
    </ul>
    <p style:text-align="justify";>
         iptables -A INPUT -i eth0 -p tcp -m multiport –dports 22,80,443 -m conntrack –ctstate NEW -j LOG –log-prefix “INTENTO ENTRANTE TCP: ”
    </p>
  </div>


  <!-- MULTIMEDIA -->
  <div class="lab-card multimedia">
    <h2>Material multimedia</h2>
    <img src="img/c1.png" alt="Evidencia">
    <img src="img/c2.png" alt="Evidencia">
  </div>


  <!-- REFLEXIÓN -->
  <div class="lab-card reflexion">
    <h2>Opinión / reflexión técnica</h2>
    <p>
      Relación del ejercicio con escenarios reales, riesgos y aplicaciones
      prácticas en la ciberseguridad.
    </p>
  </div>


  <!-- REFERENCIAS -->
  <div class="lab-card referencias">
    <h2>Referencias</h2>
    <ul>
      <li>Autor, título, año.</li>
      <li>Documentación utilizada.</li>
    </ul>
  </div>


  <!-- PDF -->
 <div style="text-align:center; margin-top:40px;">
    <a href="177339-act03.pdf" class="btn-ver" download>
      Exportar a PDF
    </a>
  </div>

</div>
<div class="section-divider"></div>
<footer>
  <p>Elisa Alejandra Arellano Wratny                    © Portafolio Seguridad Informática                    UPSLP</p>
</footer>

  <script src="https://unpkg.com/aos@2.3.1/dist/aos.js"></script>

  <script>
    AOS.init({
      duration: 450,
      delay: 0,
      offset: 10,      
      once: true,
      easing: 'ease-out-cubic',
      anchorPlacement: 'top-bottom'
    });
  </script>
    <script src="../../js/particles.js"></script>

</body>
</html>
